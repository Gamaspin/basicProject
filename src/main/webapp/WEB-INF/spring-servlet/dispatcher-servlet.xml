<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx.xsd">


    <!-- Spring MVC Framework의 유일한 Front Controller
     Controller로 향하는 모든 웹요청의 진입점이며, 웹요청을 처리하며, 결과 데이터를 Client에게 응답 한다.
    DispatcherServlet은 Spring MVC의 웹요청 Life Cycle을 주관  -->

    <!--   @Controller 와 @RequestMapping 사용 활성화
        스프링 MVC 컴포넌트들을 그것의 디폴트 설정을 가지고 활성화하기 위해 사용된다.
        이 태그는 Spring MVC가 @Controller에 요청을 보내기 위해 필요한 HandlerMapping과 HandlerAdapter를 bean으로 등록한다.
        이렇게 등록된 bean에 의해 요청 url과 컨트롤러를 매칭할 수 있다.
        RequestMappingHandlerMapping? : 요청 url과 매칭되는 컨트롤러(@Controller)를 검색하는 역할. 즉, 요청 url을 보고 어떤 컨트롤러가 처리할지 결정한다.
        RequestMappingHandlerAdapter? :컨트롤러의 실행 결과(요청을 처리한 결과)를 리턴하는 역할. Annotation 기반의 Controller 처리를 위해 반드시 필요하다.
    -->
    <mvc:annotation-driven/>
    <context:component-scan base-package="co.kr.crudboard"/>
    <!-- XML에 일일이 빈등록을 하지않고 각 빈 클래스에 @Component를 통해 자동 빈 등록 @Component는 스프링이 어노테이션에 담긴 메타정보를 이용하기 시작했을 때
        @Autowired와 함께 소개된 대표적인 어노테이션. @Component 어노테이션을 클래스에 작성하면 빈 스캐너를 통해 자동 빈 등록. 스캔 범위 지정 -->
    <!-- 인스턴스화 시킬 때 annotation-drivens 가 HandlerMappingAdaptor 로 검색해서 매핑풀(어딘가에 매핑정보들을) 담아놓는다 -->

    <!-- Transaction -->
    <!-- transactionManager Bean선언은 applicationContext에 있음 -->
    <!--    <tx:annotation-driven transaction-manager="transactionManager" proxy-target-class="true"/>-->



    <!-- ResourceHttpRequestHandler가 Resource 위치에 있는 목록에서 제공하도록 특정 URL 패턴을 따르는 정적 리소스 요청을 허용한다.
   클래스 패스의 경로를 포함해서 웹 어플리케이션 루트가 아닌 다른 위치에서 정적 리소스를 제공하는 편리한 방법을 제공
   mapping 속성은 SimpleUrlHandlerMapping가 사용할 수 있는 Ant 패턴
   (ex:  /resources/**  ? 1개의 문자와 매칭 * 0개 이상의 문자와 매칭  ** 0개이상의 디렉토리와 파일명 매칭)이어야 하고
   location 속성은 하나이상의 리소스 디렉토리 위치를 지정해야 한다.
   목록을 콤마로 구분해서 여러 리소스 위치를 지정할 수도 있다.
   해당 요청의 리소스가 존재하는지 여부를 지정한 순서대로 지정된 위치를 확인한다. -->
    <!-- 이 resources는 톰캣에게 위임하고 컨트롤러는 일하지 않겠다는 얘기, 이런 리소스들까지 컨트롤러는 읽어들이지 않을것 -->
    <mvc:resources mapping="/web_resources/**" location="/web_resources/" />
    <!--    <mvc:resources mapping="/files/**" location="/files/" />
        <mvc:resources mapping="/popup/**" location="/WEB-INF/views/popup/" />-->

    <!--<mvc:interceptors>
        <mvc:interceptor>
            <mvc:mapping path="/**" />
            <mvc:exclude-mapping path="/" /> &lt;!&ndash; 사이트 첫 화면은 굳이 인터셉터 할 필요 없기 때문에 제외 해야 한다. &ndash;&gt;
            <mvc:exclude-mapping path="/login/**" /> &lt;!&ndash; 로그인 페이지도 인터셉터에서 제외 &ndash;&gt;
            <mvc:exclude-mapping path="/mobile/login/**" /> &lt;!&ndash; 모바일 로그인 페이지도 인터셉터에서 제외 &ndash;&gt;
            <mvc:exclude-mapping path="/home/**" /> &lt;!&ndash; 홈페이지 관련 화면도 인터셉터에서 제외 &ndash;&gt;
            <mvc:exclude-mapping path="/popup/**" /> &lt;!&ndash; 홈페이지 관련 화면도 인터셉터에서 제외 &ndash;&gt;
            <mvc:exclude-mapping path="/files/**" /> &lt;!&ndash; 템플릿+다운로드한 파일에 관련된 폴더도 인터셉터에서 제외 &ndash;&gt;
            <mvc:exclude-mapping path="/web_resources/**" /> &lt;!&ndash; 홈페이지 관련 화면도 인터셉터에서 제외 &ndash;&gt;
            <mvc:exclude-mapping path="/contract/**" /> &lt;!&ndash; 계약 페이지도 인터셉터에서 제외 &ndash;&gt;
            <mvc:exclude-mapping path="/info/**" /> &lt;!&ndash; 계약 시 작성하는 정보 페이지도 인터셉터에서 제외 &ndash;&gt;
            <mvc:exclude-mapping path="/enter_contract/**" /> &lt;!&ndash; 계약 시 작성하는 정보 페이지도 인터셉터에서 제외 &ndash;&gt;
            <mvc:exclude-mapping path="/join_contract/**" /> &lt;!&ndash; 계약 시 작성하는 정보 페이지도 인터셉터에서 제외 &ndash;&gt;
            <mvc:exclude-mapping path="/common_js/**" /> &lt;!&ndash; commonjs 관련 화면도 인터셉터에서 제외 &ndash;&gt;
            <mvc:exclude-mapping path="/mContract/**" /> &lt;!&ndash; mContract 관련 화면도 인터셉터에서 제외 &ndash;&gt;

            <bean class="co.kr.login.LoginInterceptor" />
        </mvc:interceptor>
        <mvc:interceptor>
            <mvc:mapping path="/**" />
            <mvc:exclude-mapping path="/" /> &lt;!&ndash; 사이트 첫 화면은 굳이 인터셉터 할 필요 없기 때문에 제외 해야 한다. &ndash;&gt;
            <mvc:exclude-mapping path="/contract/**" /> &lt;!&ndash; 계약 페이지도 인터셉터에서 제외 &ndash;&gt;
            <mvc:exclude-mapping path="/login/**" /> &lt;!&ndash; 로그인 페이지도 인터셉터에서 제외 &ndash;&gt;
            <mvc:exclude-mapping path="/logout/**" /> &lt;!&ndash; 로그인 페이지도 인터셉터에서 제외 &ndash;&gt;
            <mvc:exclude-mapping path="/mobile/**" /> &lt;!&ndash; 모바일 로그인 페이지도 인터셉터에서 제외 &ndash;&gt;
            <mvc:exclude-mapping path="/home/**" /> &lt;!&ndash; 홈페이지 관련 화면도 인터셉터에서 제외 &ndash;&gt;
            <mvc:exclude-mapping path="/popup/**" /> &lt;!&ndash; 홈페이지 관련 화면도 인터셉터에서 제외 &ndash;&gt;
            <mvc:exclude-mapping path="/files/**" /> &lt;!&ndash; 템플릿+다운로드한 파일에 관련된 폴더도 인터셉터에서 제외 &ndash;&gt;
            <mvc:exclude-mapping path="/web_resources/**" /> &lt;!&ndash; 홈페이지 관련 화면도 인터셉터에서 제외 &ndash;&gt;
            <mvc:exclude-mapping path="/common_js/**" /> &lt;!&ndash; commonjs 관련 화면도 인터셉터에서 제외 &ndash;&gt;

            &lt;!&ndash; 그룹웨어 주소목록 제외 시작 &ndash;&gt;
            <mvc:exclude-mapping path="/groupware/**" />
            <mvc:exclude-mapping path="/approval/**" />
            <mvc:exclude-mapping path="/my_attendance/**" />
            <mvc:exclude-mapping path="/my_salary/**" />
            <mvc:exclude-mapping path="/my_certi/**" />
            <mvc:exclude-mapping path="/my_calendar/**" />
            <mvc:exclude-mapping path="/doc/**" />
            <mvc:exclude-mapping path="/approval_setting/**" />
            <mvc:exclude-mapping path="/approval_sign/**" />
            <mvc:exclude-mapping path="/expense_mng/**" />
            <mvc:exclude-mapping path="/claim_limit/**" />
            <mvc:exclude-mapping path="/claim_balance/**" />
            <mvc:exclude-mapping path="/doc_no/**" />
            <mvc:exclude-mapping path="/community/**" />
            <mvc:exclude-mapping path="/emp_approval/**" />
            <mvc:exclude-mapping path="/my_attach/**" />
            <mvc:exclude-mapping path="/my_contract/**" />
            &lt;!&ndash; 그룹웨어 주소목록 제외 종료 &ndash;&gt;

            &lt;!&ndash;hrms 주소목록 제외 시작&ndash;&gt;
            <mvc:exclude-mapping path="/hrms/**" />
            <mvc:exclude-mapping path="/code/**" />
            <mvc:exclude-mapping path="/emp/**" />
            <mvc:exclude-mapping path="/social/**" />
            <mvc:exclude-mapping path="/guaranty/**" />
            <mvc:exclude-mapping path="/layoff/**" />
            <mvc:exclude-mapping path="/substitute/**" />
            <mvc:exclude-mapping path="/attend/**" />
            <mvc:exclude-mapping path="/salary/**" />
            <mvc:exclude-mapping path="/certi/**" />
            <mvc:exclude-mapping path="/board/**" />
            <mvc:exclude-mapping path="/board_reply/**" />
            <mvc:exclude-mapping path="/division/**" />
            <mvc:exclude-mapping path="/dept/**" />
            <mvc:exclude-mapping path="/client/**" />
            <mvc:exclude-mapping path="/center/**" />
            <mvc:exclude-mapping path="/team/**" />
            <mvc:exclude-mapping path="/emp_mng_center/**" />
            <mvc:exclude-mapping path="/center_to/**" />
            <mvc:exclude-mapping path="/screeninfo/**" />
            <mvc:exclude-mapping path="/authority_screen/**" />
            <mvc:exclude-mapping path="/code/**" />
            <mvc:exclude-mapping path="/empScreen/**" />
            <mvc:exclude-mapping path="/work_id/**" />
            <mvc:exclude-mapping path="/doc_move/**" />
            <mvc:exclude-mapping path="/annual/**" />
            <mvc:exclude-mapping path="/comp_holiday/**" />
            <mvc:exclude-mapping path="/sub_holiday/**" />
            <mvc:exclude-mapping path="/expense/**" />
            <mvc:exclude-mapping path="/expense_summary/**" />
            <mvc:exclude-mapping path="/expense_cash/**" />
            <mvc:exclude-mapping path="/expense_cash_acc/**" />
            <mvc:exclude-mapping path="/expense_file/**" />
            <mvc:exclude-mapping path="/expense_claim/**" />
            <mvc:exclude-mapping path="/expense_voucher/**" />
            <mvc:exclude-mapping path="/corp_card/**" />
            <mvc:exclude-mapping path="/corp_card_site/**" />
            <mvc:exclude-mapping path="/trainee/**" />
            <mvc:exclude-mapping path="/myinfo/**" />
            <mvc:exclude-mapping path="/center_doc/**" />
            <mvc:exclude-mapping path="/contract_mng/**" />
            <mvc:exclude-mapping path="/asp/**" />
            <mvc:exclude-mapping path="/salary_calc/**" />
            <mvc:exclude-mapping path="/asp_mng/**" />
            <mvc:exclude-mapping path="/work_time_mng/**" />

            &lt;!&ndash; hrms 주소목록 제외 종료 &ndash;&gt;
            <bean class="co.kr.contract.TraineeLoginInterceptor" />
        </mvc:interceptor>
    </mvc:interceptors>-->

    <bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
        <property name="defaultEncoding" value="UTF-8"/>
        <property name="maxInMemorySize" value ="1000000000"/>
    </bean>

    <!--
        ViewResolver : 뷰 이름(string)에 해당하는 뷰를 찾아내는 인터페이스
        InternalResourceViewResolver는 JSP를 사용하여 Commander의 결과 뷰를 생성할 때 사용된다.
        InternalResourceViewResolver는 다음과 같이 두 개의 프로퍼티를 입력받는다.
            • prefix - Controller가 리턴한 뷰 이름 앞에 붙을 접두어
            • suffix - Controller가 리턴한 뷰 이름 뒤에 붙을 확장자 -->

    <!-- 결국 bean 이 붙었다는건 클래스(실행할 프로그램)니까 미리 인스턴스화 시켜서 대기중 -->

    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/views/" />
        <property name="suffix" value=".jsp" />
        <property name="contentType" value="text/html; charset=UTF-8" />
        <property name="order" value="1" />
    </bean>

</beans>